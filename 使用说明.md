# 二维码扫描器 - 使用说明

## 项目文件说明

```
二维码系列/
├── 二维码扫描器.py          # 主程序（二维码扫描）
├── 字体安装工具.py          # 字体扫描和安装工具
├── fonts/                    # 本地字体文件夹（备用）
│   ├── msyh.ttc
│   ├── simhei.ttf
│   ├── simsun.ttc
│   ├── arial.ttf
│   └── calibri.ttf
├── buildozer.spec           # APK打包配置
├── 打包说明.md              # APK打包说明
└── 使用说明.md              # 本文件
```

## 使用步骤

### 第一步：安装字体（解决乱码问题）

由于你的电脑显示中文乱码，需要先运行字体安装工具：

```bash
python 字体安装工具.py
```

**操作步骤：**
1. 运行后会打开GUI界面
2. 点击"开始扫描"按钮
3. 程序会自动扫描整个电脑的字体文件
4. 扫描完成后，点击"安装字体"按钮
5. 字体将被复制到 `D:\QRScannerFonts` 文件夹

**或者使用命令行模式：**
```bash
python 字体安装工具.py --cli
```

### 第二步：运行二维码扫描器

字体安装完成后，运行主程序：

```bash
python 二维码扫描器.py
```

## 字体路径优先级

二维码扫描器会按以下顺序查找字体：

1. **第一优先**: `D:\QRScannerFonts` (D盘字体文件夹)
2. **第二优先**: `程序目录\fonts` (程序自带的字体文件夹)
3. **备用**: Kivy默认字体 'Roboto'

## 功能说明

### 二维码扫描器功能

1. **摄像头扫描**
   - 点击"开始扫描"启动摄像头
   - 将二维码对准屏幕中央的扫描框
   - 自动识别并显示解析内容

2. **图片扫描**
   - 切换到"图片扫描"标签页
   - 点击"选择图片"按钮
   - 选择包含二维码的图片文件

3. **保存和复制**
   - 扫描成功后，点击"保存内容"将结果保存到文件
   - 点击"复制"将内容复制到剪贴板

4. **历史记录**
   - 在"历史记录"标签页查看之前的扫描记录
   - 点击"清除历史"清除所有记录

### 字体安装工具功能

1. **自动扫描**
   - 扫描整个电脑的字体文件
   - 优先扫描 `C:\Windows\Fonts` 文件夹
   - 然后扫描其他驱动器

2. **智能识别**
   - 自动识别常用中文字体（微软雅黑、黑体、宋体等）
   - 识别英文字体（Arial、Calibri等）

3. **一键安装**
   - 将找到的字体复制到D盘指定文件夹
   - 生成字体配置文件

## 常见问题

### Q: 运行字体安装工具时提示缺少Kivy？
A: 安装Kivy库：
```bash
pip install kivy
```

### Q: 字体安装后还是显示乱码？
A: 检查D盘字体文件夹是否存在：
- 打开 `D:\QRScannerFonts` 文件夹
- 确认字体文件已复制成功
- 重新运行二维码扫描器

### Q: 如何更改字体安装路径？
A: 在字体安装工具的GUI界面中，可以修改"安装路径"文本框，或者在代码中修改 `TARGET_FONT_DIR` 变量。

### Q: 扫描电脑字体需要多长时间？
A: 通常需要2-5分钟，取决于电脑硬盘大小和文件数量。

### Q: 可以跳过字体安装直接运行扫描器吗？
A: 可以，但可能会显示乱码。扫描器会尝试使用程序目录下的fonts文件夹中的字体。

## 系统要求

- Windows 7/8/10/11
- Python 3.7+
- 摄像头（用于摄像头扫描功能）

## 依赖库安装

```bash
pip install kivy opencv-python pyzbar Pillow numpy
```

## 打包成APK

参考 `打包说明.md` 文件进行Android APK打包。

## 注意事项

1. **首次使用**：建议先运行字体安装工具
2. **字体路径**：确保D盘有足够的空间存储字体文件
3. **权限问题**：某些系统文件夹可能需要管理员权限才能访问
4. **杀毒软件**：扫描整个电脑时，杀毒软件可能会提示，请允许操作
